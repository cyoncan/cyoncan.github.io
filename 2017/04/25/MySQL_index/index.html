<html>
<head>
	
	<title>MySQL添加索引</title>
	<meta name="keywords" content="fzb.me,冯宗宝,冯宗宝的blog" />

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
	   <link href="/css/main.css?v=3" rel="stylesheet" type="text/css" />
    
        <script src="/js/util.js"></script>
        <script>
            if(isMobile()) {
                loadjscssfile('../css/mobile.css', 'css');
            } else {
                loadjscssfile('../css/desktop.css', 'css');
            }
        </script> 
    

    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">

    
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=3"/>
    

</head>

<body>


<h2 class="title">MySQL添加索引</h2>
<!---
<div style="text-align:center;margin-top: -10px;">
<div class="article-category">
发表于2017年4月25日


    <a class="article-category-link" href="/categories/MySQL/">MySQL</a>



 </div>
--->
</div>

<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#一-查看索引"><span class="toc-text">一.查看索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二-创建索引原则"><span class="toc-text">二.创建索引原则</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-频繁的作为查询条件的字段应该创建索引"><span class="toc-text">1. 频繁的作为查询条件的字段应该创建索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-唯一性太差的字段不适合单独创建索引，即使频繁作为查询条件"><span class="toc-text">2. 唯一性太差的字段不适合单独创建索引，即使频繁作为查询条件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-非常频繁更新的字段不适合创建索引"><span class="toc-text">3. 非常频繁更新的字段不适合创建索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-不会出现在where子句中的字段不该创建索引"><span class="toc-text">4.不会出现在where子句中的字段不该创建索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-最左配原则…"><span class="toc-text">5.最左配原则…</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三-索引语法"><span class="toc-text">三.索引语法:</span></a></li></ol>
<a id="more"></a>
<h3 id="一-查看索引"><a href="#一-查看索引" class="headerlink" title="一.查看索引"></a>一.查看索引</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show index from tablename;</span><br><span class="line">或</span><br><span class="line">mysql&gt; show keys from tablename;</span><br></pre></td></tr></table></figure>
<p><img src="http://ooz08pfj3.bkt.clouddn.com/QQ20170425221802.png" alt=""></p>
<ul>
<li><strong>Non_unique</strong>: 如果索引不能包括重复词,则为0,如果可以则为1.</li>
<li><strong>Key_name</strong>: 索引的名称</li>
<li><strong>Seq_in_index</strong>: 索引中的列序列号,从1开始</li>
<li><strong>Column_name</strong>: 列名称</li>
<li><strong>Collation</strong>: 列以什么方式存储在索引中。在MySQL中，有值‘A’（升序）或NULL（无分类）</li>
<li><strong>Cardinality</strong>：索引中唯一值的数目的估计值。通过运行ANALYZE TABLE或myisamchk -a可以更新。基数根据被存储为整数的统计数据来计数，所以即使对于小型表，该值也没有必要是精确的。基数越大，当进行联合时，MySQL使用该索引的机会就越大。</li>
<li><strong>Sub_part</strong>：如果列只是被部分地编入索引，则为被编入索引的字符的数目。如果整列被编入索引，则为NULL。</li>
<li><strong>Packed</strong>：指示关键字如何被压缩。如果没有被压缩，则为NULL。</li>
<li><strong>Null</strong>：如果列含有NULL，则含有YES。如果没有，则该列含有NO。</li>
<li><strong>Index_type</strong>：用过的索引方法（BTREE, FULLTEXT, HASH, RTREE）。</li>
<li><strong>Comment</strong>：更多评注。</li>
</ul>
<p><strong>查看数据库表中存储引擎的类型</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show table status from dbname <span class="built_in">where</span> name=<span class="string">'tablename'</span>;</span><br><span class="line">或者</span><br><span class="line">mysql&gt; use dbname</span><br><span class="line">mysql&gt; show table status <span class="built_in">where</span> name=<span class="string">'tablename'</span>;</span><br></pre></td></tr></table></figure>
<h3 id="二-创建索引原则"><a href="#二-创建索引原则" class="headerlink" title="二.创建索引原则"></a>二.创建索引原则</h3><h5 id="1-频繁的作为查询条件的字段应该创建索引"><a href="#1-频繁的作为查询条件的字段应该创建索引" class="headerlink" title="1. 频繁的作为查询条件的字段应该创建索引"></a>1. 频繁的作为查询条件的字段应该创建索引</h5><h5 id="2-唯一性太差的字段不适合单独创建索引，即使频繁作为查询条件"><a href="#2-唯一性太差的字段不适合单独创建索引，即使频繁作为查询条件" class="headerlink" title="2. 唯一性太差的字段不适合单独创建索引，即使频繁作为查询条件"></a>2. 唯一性太差的字段不适合单独创建索引，即使频繁作为查询条件</h5><h5 id="3-非常频繁更新的字段不适合创建索引"><a href="#3-非常频繁更新的字段不适合创建索引" class="headerlink" title="3. 非常频繁更新的字段不适合创建索引"></a>3. 非常频繁更新的字段不适合创建索引</h5><h5 id="4-不会出现在where子句中的字段不该创建索引"><a href="#4-不会出现在where子句中的字段不该创建索引" class="headerlink" title="4.不会出现在where子句中的字段不该创建索引"></a>4.不会出现在where子句中的字段不该创建索引</h5><h5 id="5-最左配原则…"><a href="#5-最左配原则…" class="headerlink" title="5.最左配原则…"></a>5.最左配原则…</h5><p>eg:</p>
<p><strong>i. 在where子句中出现的列, 在join子句中出现的列,</strong> 而不是在select关键字后选择列表的列.</p>
<p><strong>ii. 索引列的基数越大，索引的效果越好。例如，存放出生日期的列具有不同的值，很容易区分行，而用来记录性别的列，只有M和F,则对此进行索引没有多大用处，因此不管搜索哪个值，都会得出大约一半的行</strong></p>
<p><strong>存储引擎对索引类型的支持情况:</strong></p>
<table>
<thead>
<tr>
<th>存储引擎</th>
<th>允许的索引类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>MyISAM</td>
<td>BTREE</td>
</tr>
<tr>
<td>InnoDB</td>
<td>BTREE</td>
</tr>
<tr>
<td>MEMORY/HEAP</td>
<td>HASH,BTREE</td>
</tr>
</tbody>
</table>
<h3 id="三-索引语法"><a href="#三-索引语法" class="headerlink" title="三.索引语法:"></a>三.索引语法:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create [unique|fulltext|spatial] index index_name [using index_type] on table_name (index_column_name);</span><br><span class="line">alter table table_name index index_name;</span><br><span class="line">drop index index_name on table_name;</span><br></pre></td></tr></table></figure>
<p>参考:</p>
<p><a href="http://tech.meituan.com/mysql-index.html" target="_blank" rel="noopener">美团点评技术团队-MySQL索引原理及慢查询优化</a></p>


<!--<a href="http://cyoncan.github.io/2017/04/25/MySQL_index/#disqus_thread" class="article-comment-link">Comments</a>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = ''; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
-->
<div style="display:none">
<script src="http://s4.cnzz.com/stat.php?id=&web_id=" language="JavaScript"></script>script>
</div>






</body>
</html>