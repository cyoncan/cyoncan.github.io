<html><head><title>Python多版本管理</title><meta name="keywords" content="linux"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link href="/css/main.css?v=3" rel="stylesheet" type="text/css"><script src="/js/util.js"></script><script>isMobile()?loadjscssfile("../css/mobile.css","css"):loadjscssfile("../css/desktop.css","css")</script><link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=3"></head><body><h2 class="title">Python多版本管理</h2><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Python多版本共存管理之pyenv"><span class="toc-text">Python多版本共存管理之pyenv</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-安装pyenv"><span class="toc-text">1.安装pyenv</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Upgrading-pyenv"><span class="toc-text">2.Upgrading pyenv</span></a></li></ol></li></ol><a id="more"></a><h3 id="Python多版本共存管理之pyenv"><a href="#Python多版本共存管理之pyenv" class="headerlink" title="Python多版本共存管理之pyenv"></a>Python多版本共存管理之pyenv</h3><p>一般的系统都是自带2.*版本,有时候部署一些程序又需要用到3.x的，比如jumpserver就是需要3.5.x及以上的。所有Python需要用到多版本共存。</p><h4 id="1-安装pyenv"><a href="#1-安装pyenv" class="headerlink" title="1.安装pyenv"></a>1.安装pyenv</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/pyenv/pyenv.git ~/.pyenv</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="string">'export PYENV_ROOT="$HOME/.pyenv"'</span> &gt;&gt; ~/.bash_profile</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="string">'export PATH="$PYENV_ROOT/bin:$PATH"'</span> &gt;&gt; ~/.bash_profile</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="string">'eval "$(pyenv init -)"'</span> &gt;&gt; ~/.bash_profile</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">exec</span> <span class="variable">$SHELL</span></span></span><br></pre></td></tr></table></figure><p><strong>Zsh note</strong>: Modify your <code>~/.zshenv</code> file instead of <code>~/.bash_profile</code>.例如像我使用的oh_my_zsh的就需要注意这个.</p><p><strong>Ubuntu and Fedora note</strong>: Modify your <code>~/.bashrc</code> file instead of <code>~/.bash_profile</code>.</p><h4 id="2-Upgrading-pyenv"><a href="#2-Upgrading-pyenv" class="headerlink" title="2.Upgrading pyenv"></a>2.Upgrading pyenv</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> $(pyenv root)</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git pull</span></span><br><span class="line"><span class="meta">#</span><span class="bash">升级到指定的版本</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> $(pyenv root)</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git fetch</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git tag</span></span><br><span class="line">v0.1.0</span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout v0.1.0</span></span><br></pre></td></tr></table></figure><p><strong>安装Python的依赖包</strong></p><p>在安装Python时需要首先安装其依赖的其他软件包，已知的一些需要预先安装的库如下。</p><p>在CentOS/RHEL/Fedora下:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yum install readline readline-devel readline-static</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum install openssl openssl-devel openssl-static</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum install sqlite-devel</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum install bzip2-devel bzip2-libs</span></span><br></pre></td></tr></table></figure><p>对付pyenv默认下载慢的问题</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v=3.5.2|wget http://mirrors.sohu.com/python/$v/Python-$v.tar.xz -P ~/.pyenv/cache/;pyenv install $v   #V是版本号,去Sohu镜像站点下载.</span><br><span class="line">export  PYTHON_BUILD_MIRROR_URL="http://pyenv.qiniudn.com/pythons/"   #或者使用这个七牛的镜像站点,但是好多新版本没有.</span><br></pre></td></tr></table></figure><div style="display:none"><script src="http://s4.cnzz.com/stat.php?id=&web_id=" language="JavaScript"></script>script></div></body></html>