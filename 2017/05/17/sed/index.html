<html>
<head>
	
	<title>sed</title>
	<meta name="keywords" content="fzb.me,冯宗宝,冯宗宝的blog" />

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
	   <link href="/css/main.css?v=3" rel="stylesheet" type="text/css" />
    
        <script src="/js/util.js"></script>
        <script>
            if(isMobile()) {
                loadjscssfile('../css/mobile.css', 'css');
            } else {
                loadjscssfile('../css/desktop.css', 'css');
            }
        </script> 
    

    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">

    
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=3"/>
    

</head>

<body>


<h2 class="title">sed</h2>
<!---
<div style="text-align:center;margin-top: -10px;">
<div class="article-category">
发表于2017年5月17日


    <a class="article-category-link" href="/categories/Linux/">Linux</a>



 </div>
--->
</div>

<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、sed简介"><span class="toc-text">一、sed简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-删除文件每行的第二个字符"><span class="toc-text">1.删除文件每行的第二个字符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-删除文件每行倒数的第二个字符"><span class="toc-text">2.删除文件每行倒数的第二个字符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-打印文件空行的行号"><span class="toc-text">3.打印文件空行的行号</span></a></li></ol></li></ol>
<a id="more"></a>
<h3 id="一、sed简介"><a href="#一、sed简介" class="headerlink" title="一、sed简介"></a>一、sed简介</h3><p><strong>sed命令</strong></p>
<ul>
<li><p>a : 新增， a 的后面可以接字串，而这些字串会在新的一行出现（目前的下一行）。</p>
</li>
<li><p>c : 取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行。</p>
</li>
<li><p>d : 删除，d 后面通常不接任东西。</p>
</li>
<li><p>i  : 插入， i 的后面可以接字符串，而这些字符串会在新的一行出现（目前的上一行）。</p>
</li>
<li><p>p : 列印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行。</p>
</li>
<li><p>s : 取代，可以直接进行取代的工作！通常这个 s 的动作可以搭配正规表示法！例如 1,20s/old/new/g 就是。</p>
</li>
</ul>
<p><strong>sed选项</strong></p>
<ul>
<li>-e : 多点编辑，-e script指定的script来处理输入的文本文件。</li>
<li>-n : 仅显示script处理后的结果(经过sed处理的一行或者动作才会被列出来的)。</li>
<li>-f : -f scriptfile，指定的script文件来处理输入的文本文件。</li>
<li>-i : 直接修改读取的文件内容，而不是直接输出到终端。</li>
</ul>
<p><strong>基础正则表达式</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">字符</th>
<th style="text-align:left">作用</th>
<th style="text-align:left">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">^</td>
<td style="text-align:left">匹配行开头。</td>
<td style="text-align:left">/^me/   匹配所有以me开头的行</td>
</tr>
<tr>
<td style="text-align:center">$</td>
<td style="text-align:left">匹配行结尾。</td>
<td style="text-align:left">/me$/   匹配所有以me结尾的行</td>
</tr>
<tr>
<td style="text-align:center">.</td>
<td style="text-align:left">匹配单个字符</td>
<td style="text-align:left">/m…e/   匹配包含字母m,后跟三个任意字符，且再跟字母e的行</td>
</tr>
<tr>
<td style="text-align:center">*</td>
<td style="text-align:left">匹配单个或多个前导字符</td>
<td style="text-align:left">/me*/   匹配包含字母me,后面跟多个或零个e字母的行</td>
</tr>
<tr>
<td style="text-align:center">[]</td>
<td style="text-align:left">匹配指定字符组内的任一字符</td>
<td style="text-align:left">/[mM]e/   匹配包含me或者Me的行</td>
</tr>
<tr>
<td style="text-align:center">&amp;</td>
<td style="text-align:left">保存查找串</td>
<td style="text-align:left">s/me/**&amp;**/   符号&amp;代表查找串。me将被替换为**me**</td>
</tr>
<tr>
<td style="text-align:center">\&lt;</td>
<td style="text-align:left">匹配词首</td>
<td style="text-align:left">/\&lt;me/   匹配以me为首的词</td>
</tr>
<tr>
<td style="text-align:center">\&gt;</td>
<td style="text-align:left">匹配词尾</td>
<td style="text-align:left">/\&gt;me/   匹配以me结尾的词</td>
</tr>
<tr>
<td style="text-align:center">x{m\}</td>
<td style="text-align:left">匹配连续m个x</td>
<td style="text-align:left">/A\{4}/   匹配包含连续4个A的行</td>
</tr>
<tr>
<td style="text-align:center">x\{m,\}</td>
<td style="text-align:left">匹配至少m个x</td>
<td style="text-align:left">/A\{5,\}/   匹配包含至少连续4个A的行</td>
</tr>
<tr>
<td style="text-align:center">x\{m,n\}</td>
<td style="text-align:left">匹配至少m个，但不超过n个x</td>
<td style="text-align:left">/A\{4,8\}/   匹配包含连续4到8个A的行</td>
</tr>
</tbody>
</table>
<p><em>sed如果用到了字符实体本身是属于sed命令选项的，需要用反斜杠 \ 进行转义</em></p>
<h4 id="1-删除文件每行的第二个字符"><a href="#1-删除文件每行的第二个字符" class="headerlink" title="1.删除文件每行的第二个字符"></a>1.删除文件每行的第二个字符</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed -nr <span class="string">'s/.//2'</span> file</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed -nr <span class="string">'s/(.)(.)(.*)/\1\3/p'</span> file</span></span><br></pre></td></tr></table></figure>
<h4 id="2-删除文件每行倒数的第二个字符"><a href="#2-删除文件每行倒数的第二个字符" class="headerlink" title="2.删除文件每行倒数的第二个字符"></a>2.删除文件每行倒数的第二个字符</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed -nr <span class="string">'s/(.*)(.)(.)/\1\3/p'</span> file</span></span><br></pre></td></tr></table></figure>
<h4 id="3-打印文件空行的行号"><a href="#3-打印文件空行的行号" class="headerlink" title="3.打印文件空行的行号"></a>3.打印文件空行的行号</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed -n <span class="string">'/^$/='</span> file</span></span><br></pre></td></tr></table></figure>


<!--<a href="http://cyoncan.github.io/2017/05/17/sed/#disqus_thread" class="article-comment-link">Comments</a>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = ''; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
-->
<div style="display:none">
<script src="http://s4.cnzz.com/stat.php?id=&web_id=" language="JavaScript"></script>script>
</div>






</body>
</html>