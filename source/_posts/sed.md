---
title: sed
date: 2017-05-17  21:23:51
categories:
- CentOS
tags:
- sed
- linux
---

<!-- more -->

### 一、sed简介

**sed命令**

- a : 新增， a 的后面可以接字串，而这些字串会在新的一行出现（目前的下一行）。

- c : 取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行。

- d : 删除，d 后面通常不接任东西。

- i  : 插入， i 的后面可以接字符串，而这些字符串会在新的一行出现（目前的上一行）。

- p : 列印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行。

- s : 取代，可以直接进行取代的工作！通常这个 s 的动作可以搭配正规表示法！例如 1,20s/old/new/g 就是。

**sed选项**

- -e : 多点编辑，-e script指定的script来处理输入的文本文件。
- -n : 仅显示script处理后的结果(经过sed处理的一行或者动作才会被列出来的)。
- -f : -f scriptfile，指定的script文件来处理输入的文本文件。
- -i : 直接修改读取的文件内容，而不是直接输出到终端。

**基础正则表达式**

|     字符     | 作用             | 实例                                       |
| :--------: | :------------- | :--------------------------------------- |
|     ^      | 匹配行开头。         | /^me/   匹配所有以me开头的行                      |
|     $      | 匹配行结尾。         | /me$/   匹配所有以me结尾的行                      |
|     .      | 匹配单个字符         | /m...e/   匹配包含字母m,后跟三个任意字符，且再跟字母e的行      |
|     *      | 匹配单个或多个前导字符    | /me*/   匹配包含字母me,后面跟多个或零个e字母的行           |
|     []     | 匹配指定字符组内的任一字符  | /[mM]e/   匹配包含me或者Me的行                   |
|     &      | 保存查找串          | s/me/\*\*&\*\*/   符号&代表查找串。me将被替换为\*\*me\*\* |
|    \\<     | 匹配词首           | /\\<me/   匹配以me为首的词                      |
|    \\>     | 匹配词尾           | /\\>me/   匹配以me结尾的词                      |
|  x\{m\\}   | 匹配连续m个x        | /A\\{4}/   匹配包含连续4个A的行                   |
| x\\{m,\\}  | 匹配至少m个x        | /A\\{5,\\}/   匹配包含至少连续4个A的行              |
| x\\{m,n\\} | 匹配至少m个，但不超过n个x | /A\\{4,8\\}/   匹配包含连续4到8个A的行             |

*sed如果用到了字符实体本身是属于sed命令选项的，需要用反斜杠 \ 进行转义*

#### 1.删除文件每行的第二个字符

```shell
$ sed -nr 's/.//2' file
$ sed -nr 's/(.)(.)(.*)/\1\3/p' file
```

#### 2.删除文件每行倒数的第二个字符

```shell
$ sed -nr 's/(.*)(.)(.)/\1\3/p' file
```

#### 3.打印文件空行的行号

```shell
$ sed -n '/^$/=' file
```

